---
import Layout from "../layouts/Layout.astro";
import Todo from "../components/Todo.svelte";
const getTodo = async (i) => {
	const response = await fetch(
		`https://jsonplaceholder.typicode.com/todos/${i}`
	);
	return await response.json();
};
const columns = Object.keys(await getTodo(1));
---

<Layout selected="/">
	<h1 class="text-2xl font-bold">Useless Codes</h1>
	<div
		class="grid"
		style={{
			gridTemplateColumns: `repeat(${columns.length}, minmax(0, auto))`,
		}}
	>
		{
			columns.map((c) => (
				<div class="font-bold uppercase border-b-black border-b-2">
					{c}
				</div>
			))
		}
		{
			[...Array(500).keys()].map(async (i) => (
				<Todo client:visible todo={await getTodo(i + 1)} />
			))
		}
	</div>
</Layout>
